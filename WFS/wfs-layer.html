<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no" />
    <title>WFS Layer</title>
    <link rel="stylesheet" href="https://js.arcgis.com/3.32/esri/css/esri.css">
    <style>
        html,
        body,
        #map {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <script src="https://js.arcgis.com/3.32/"></script>
    <script>
        var map;

        require(["esri/map",
            "esri/InfoTemplate",
            "esri/layers/WFSLayer",
            "esri/config",
            "dojo/domReady!"
        ], function (Map,
            InfoTemplate,
            WFSLayer,
            esriConfig) {
            map = new Map("map", {
                basemap: "topo",
                center: [138, 35],
                zoom: 7
            });

           
            //esriConfig.defaults.io.corsEnabledServers.push("https://www.kagsi.com");
            //var url = "https://sampleserver6.arcgisonline.com/arcgis/services/SampleWorldCities/MapServer/WFSServer"
            var url = "https://dservices.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/services/JapanPrefectures2018/WFSServer";
            //var url = "https://www.kagsi.com/server106/services/OGC/OGCWFS/MapServer/WFSServer";
            //esriConfig.defaults.io.corsEnabledServers.push('https://www.kagsi.com/server106/services/OGC/OGCWFS/MapServer/WFSServer');
            
            
            // esriConfig.defaults.io.proxyUrl = "https://www.kagsi.com";
            // esriConfig.defaults.io.alwaysUseProxy = false;

            var opts = {
                "url": url,
                "version": "2.0.0",
                "name": "JapanPrefectures2018"
               // "name": "Religious"
            };

            var layer = new WFSLayer();

            // layer.on("error", function (error) {
            //     console.log("[ERROR] ", error);
            // });
            layer.fromJson(opts);
            console.log(layer);
            map.addLayer(layer);
        });    
    </script>
</head>

<body>
    <div id="map"></div>
</body>

</html>